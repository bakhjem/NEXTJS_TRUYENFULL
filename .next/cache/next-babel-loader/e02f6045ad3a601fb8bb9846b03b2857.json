{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Layout from '../../../components/MyLayout';\nimport 'isomorphic-unfetch';\nimport Link from 'next/link';\nimport React, { Component, createRef } from 'react';\nimport { createMedia } from '@artsy/fresnel';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport ReactHtmlParser, { processNodes, convertNodeToElement, htmlparser2 } from 'react-html-parser';\nimport { Helmet } from 'react-helmet';\nimport { saveNovel, settingNovel } from '../../../redux/actions/novelActions';\nimport { API_URL } from '../../../config/config';\nimport { Container, Breadcrumb, Divider, Dropdown, Grid, Header, Icon, Image, List, Menu, Segment, Visibility, Item, Sticky, Rail, Ref, Button } from 'semantic-ui-react';\n\nvar _createMedia = createMedia({\n  breakpoints: {\n    mobile: 0,\n    tablet: 768,\n    computer: 1024\n  }\n}),\n    MediaContextProvider = _createMedia.MediaContextProvider,\n    Media = _createMedia.Media;\n\nvar menuStyle = {\n  border: 'none',\n  borderRadius: 0,\n  boxShadow: 'none',\n  marginBottom: '1em',\n  transition: 'box-shadow 0.5s ease, padding 0.5s ease'\n};\nvar fixedMenuStyle = {\n  backgroundColor: '#fff',\n  border: '1px solid #ddd',\n  boxShadow: '0px 3px 5px rgba(0, 0, 0, 0.2)'\n};\n\nvar Chapter = /*#__PURE__*/function (_React$Component) {\n  _inherits(Chapter, _React$Component);\n\n  var _super = _createSuper(Chapter);\n\n  function Chapter(props) {\n    var _this;\n\n    _classCallCheck(this, Chapter);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"contextRef\", /*#__PURE__*/createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOverlayRef\", function (c) {\n      var overlayRect = _this.state.overlayRect;\n\n      if (!overlayRect) {\n        _this.setState({\n          overlayRect: _.pick(c.getBoundingClientRect(), 'height', 'width')\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"stickOverlay\", function () {\n      return _this.setState({\n        overlayFixed: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"stickTopMenu\", function () {\n      return _this.setState({\n        menuFixed: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unStickOverlay\", function () {\n      return _this.setState({\n        overlayFixed: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unStickTopMenu\", function () {\n      return _this.setState({\n        menuFixed: false\n      });\n    });\n\n    _this.state = {\n      prechap: '',\n      nextchap: '',\n      menuFixed: false,\n      overlayFixed: false,\n      totalchapter: 1\n    };\n    return _this;\n  }\n\n  _createClass(Chapter, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this2 = this;\n\n      if (this.props.novelchapter !== prevProps.novelchapter) {\n        fetch(\"\".concat(API_URL, \"novel?id=\").concat(this.props.novelchapter.idnovels)).then(function (r) {\n          return r.json();\n        }).then(function (data) {\n          if (data.chapterlist.length === 1) {\n            _this2.state({\n              prechap: '',\n              nextchap: '',\n              totalchapter: data.chapterlist.length\n            });\n          } else {\n            for (var i = 0; i < data.chapterlist.length; i++) {\n              if (_this2.props.novelchapter.idchapter === data.chapterlist[i].idchapter) {\n                if (i === 0) {\n                  _this2.setState({\n                    prechap: '',\n                    nextchap: data.chapterlist[i + 1].idchapter,\n                    totalchapter: data.chapterlist.length\n                  }); // return { novelchapter: json, prechap: '', nextchap: json1.chapterlist[i + 1].idchapter }\n\n                }\n\n                if (i > 0 && i < data.chapterlist.length - 1) {\n                  _this2.setState({\n                    prechap: data.chapterlist[i - 1].idchapter,\n                    nextchap: data.chapterlist[i + 1].idchapter,\n                    totalchapter: data.chapterlist.length\n                  }); // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: json1.chapterlist[i + 1].idchapter }\n\n                }\n\n                if (i === data.chapterlist.length - 1) {\n                  _this2.setState({\n                    prechap: data.chapterlist[i - 1].idchapter,\n                    nextchap: '',\n                    totalchapter: data.chapterlist.length\n                  }); // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: '' }\n\n                }\n              }\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      fetch(\"\".concat(API_URL, \"novel?id=\").concat(this.props.novelchapter.idnovels)).then(function (r) {\n        return r.json();\n      }).then(function (data) {\n        _this3.props.saveNovel(data);\n\n        if (data.chapterlist.length === 1) {\n          _this3.state({\n            prechap: '',\n            nextchap: ''\n          });\n        } else {\n          for (var i = 0; i < data.chapterlist.length; i++) {\n            if (_this3.props.novelchapter.idchapter === data.chapterlist[i].idchapter) {\n              if (i === 0) {\n                _this3.setState({\n                  prechap: '',\n                  nextchap: data.chapterlist[i + 1].idchapter\n                }); // return { novelchapter: json, prechap: '', nextchap: json1.chapterlist[i + 1].idchapter }\n\n              }\n\n              if (i > 0 && i < data.chapterlist.length - 1) {\n                _this3.setState({\n                  prechap: data.chapterlist[i - 1].idchapter,\n                  nextchap: data.chapterlist[i + 1].idchapter\n                }); // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: json1.chapterlist[i + 1].idchapter }\n\n              }\n\n              if (i === data.chapterlist.length - 1) {\n                _this3.setState({\n                  prechap: data.chapterlist[i - 1].idchapter,\n                  nextchap: ''\n                }); // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: '' }\n\n              }\n            }\n          }\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(this.props);\n      console.log(this.state);\n      var _this$state = this.state,\n          menuFixed = _this$state.menuFixed,\n          overlayFixed = _this$state.overlayFixed,\n          overlayRect = _this$state.overlayRect;\n      return __jsx(Layout, null, __jsx(\"style\", null, \"\\n          html, body {\\n            background: #f5f7fa;\\n          }\\n        \"), __jsx(Helmet, null, __jsx(\"title\", null, \"Read \".concat(this.props.novelchapter.chaptername), \" - KitesNovel\"), __jsx(\"meta\", {\n        name: \"description\",\n        content: \"Read \".concat(this.props.novelchapter.chaptername, \" for free, total \").concat(this.state.totalchapter, \" chapter \")\n      }), __jsx(\"meta\", {\n        name: \"theme-color\",\n        content: \"#008f68\"\n      }), __jsx(\"meta\", {\n        name: \"keywords\",\n        content: \"\".concat(this.props.novelchapter.chaptername, \", \").concat(this.props.novelchapter.chaptername, \" free, \").concat(this.props.novelReducer.novelname, \" light novel, \").concat(this.props.novelReducer.novelname, \" full chapters, \").concat(this.props.novelReducer.novelname, \" latest chapters\")\n      })), __jsx(MediaContextProvider, null, __jsx(Media, {\n        greaterThan: \"mobile\"\n      }, __jsx(Visibility, {\n        onBottomPassed: this.stickTopMenu,\n        onBottomVisible: this.unStickTopMenu,\n        once: false\n      }, __jsx(Menu, {\n        borderless: true,\n        fixed: menuFixed ? 'top' : undefined,\n        style: menuFixed ? fixedMenuStyle : menuStyle\n      }, __jsx(Container, null, __jsx(Menu.Item, null, __jsx(Link, {\n        href: \"/\"\n      }, __jsx(Image, {\n        size: \"tiny\",\n        src: \"/logo.png\"\n      }))), __jsx(Menu.Item, {\n        header: true\n      }, __jsx(Breadcrumb, {\n        size: 'large'\n      }, __jsx(Breadcrumb.Section, {\n        link: true\n      }, __jsx(Link, {\n        href: \"/\"\n      }, \"Home\")), __jsx(Breadcrumb.Divider, {\n        icon: \"right chevron\"\n      }), __jsx(Breadcrumb.Section, {\n        link: true\n      }, __jsx(Link, {\n        as: \"/novel/\".concat(this.props.novelchapter.idnovels),\n        href: \"/novel/[id]\"\n      }, this.props.novelReducer.novelname)), __jsx(Breadcrumb.Divider, {\n        icon: \"right chevron\"\n      }), __jsx(Breadcrumb.Section, {\n        active: true\n      }, this.props.novelchapter.chaptername))))))), __jsx(Media, {\n        at: \"mobile\"\n      }, __jsx(Visibility, {\n        onBottomPassed: this.stickTopMenu,\n        onBottomVisible: this.unStickTopMenu,\n        once: false\n      }, __jsx(Menu, {\n        borderless: true,\n        fixed: menuFixed ? 'top' : undefined,\n        style: menuFixed ? fixedMenuStyle : menuStyle\n      }, __jsx(Container, null, __jsx(Menu.Item, null, __jsx(Link, {\n        href: \"/\"\n      }, __jsx(Image, {\n        size: \"tiny\",\n        src: \"/logo.png\"\n      }))), __jsx(Menu.Item, {\n        header: true\n      }, __jsx(Breadcrumb, {\n        size: 'large'\n      }, __jsx(Breadcrumb.Section, {\n        link: true\n      }, __jsx(Link, {\n        as: \"/novel/\".concat(this.props.novelchapter.idnovels),\n        href: \"/novel/[id]\"\n      }, this.props.novelReducer.novelname))))))))), __jsx(Container, {\n        text: true,\n        style: {\n          backgroundColor: this.props.novelReducer.background\n        }\n      }, __jsx(Grid, {\n        style: {\n          marginTop: 20\n        }\n      }, __jsx(Grid.Column, {\n        className: \"detail-containers\",\n        mobile: 16,\n        tablet: 16,\n        computer: 16\n      }, __jsx(Ref, {\n        innerRef: this.contextRef\n      }, __jsx(Segment, null, __jsx(Item.Group, {\n        textAlign: \"left\"\n      }, __jsx(Item.Description, {\n        className: \"content\",\n        style: {\n          fontFamily: this.props.novelReducer.font,\n          lineHeight: this.props.novelReducer.lineheight,\n          fontSize: this.props.novelReducer.fontsize\n        }\n      }, this.props.novelchapter.content !== undefined ? ReactHtmlParser(this.props.novelchapter.content) : null)), __jsx(MediaContextProvider, null, __jsx(Media, {\n        greaterThan: \"mobile\"\n      }, __jsx(Rail, {\n        position: \"right\",\n        style: {\n          marginTop: 100\n        }\n      }, __jsx(Sticky, {\n        offset: 100,\n        bottomOffset: 100,\n        context: this.contextRef\n      }, __jsx(List, null, __jsx(List.Item, null, __jsx(Button, {\n        size: \"large\",\n        circular: true,\n        icon: \"bars\"\n      })), __jsx(List.Item, null, __jsx(Button, {\n        size: \"large\",\n        circular: true,\n        icon: \"font\"\n      })), __jsx(List.Item, null, __jsx(Button, {\n        size: \"large\",\n        circular: true,\n        icon: \"moon\"\n      })))))))))), __jsx(MediaContextProvider, null, __jsx(Media, {\n        greaterThan: \"mobile\"\n      }, __jsx(Grid.Row, {\n        verticalAlign: \"middle\"\n      }, __jsx(Button.Group, {\n        widths: \"3\"\n      }, __jsx(Link, {\n        as: \"/doc/\".concat(this.props.novelchapter.idnovels, \"/\").concat(this.state.prechap),\n        href: \"/doc/[id]/[chapter]\"\n      }, __jsx(Button, {\n        size: \"huge\",\n        color: \"black\",\n        disabled: this.state.prechap !== \"\" ? false : true,\n        labelPosition: \"left\",\n        icon: \"left chevron\",\n        content: \"Prev chapter\"\n      })), __jsx(Button, {\n        size: \"huge\",\n        color: \"black\",\n        icon: \"bars\",\n        content: \"Chapter List\"\n      }), __jsx(Link, {\n        as: \"/doc/\".concat(this.props.novelchapter.idnovels, \"/\").concat(this.state.nextchap),\n        href: \"/doc/[id]/[chapter]\"\n      }, __jsx(Button, {\n        size: \"huge\",\n        color: \"black\",\n        disabled: this.state.nextchap !== \"\" ? false : true,\n        labelPosition: \"right\",\n        icon: \"right chevron\",\n        content: \"Next chapter\"\n      }))))), __jsx(Media, {\n        at: \"mobile\"\n      }, __jsx(Grid.Row, {\n        mobile: 16,\n        tablet: 16,\n        computer: 16,\n        verticalAlign: \"middle\"\n      }, __jsx(Button.Group, {\n        widths: \"3\"\n      }, __jsx(Link, {\n        as: \"/doc/\".concat(this.props.novelchapter.idnovels, \"/\").concat(this.state.prechap),\n        href: \"/doc/[id]/[chapter]\"\n      }, __jsx(Button, {\n        size: \"huge\",\n        color: \"black\",\n        disabled: this.state.prechap !== \"\" ? false : true,\n        labelPosition: \"left\",\n        icon: \"left chevron\"\n      })), __jsx(Button, {\n        size: \"huge\",\n        color: \"black\",\n        icon: \"bars\"\n      }), __jsx(Link, {\n        as: \"/doc/\".concat(this.props.novelchapter.idnovels, \"/\").concat(this.state.nextchap),\n        href: \"/doc/[id]/[chapter]\"\n      }, __jsx(Button, {\n        size: \"huge\",\n        color: \"black\",\n        disabled: this.state.nextchap !== \"\" ? false : true,\n        labelPosition: \"right\",\n        icon: \"right chevron\"\n      })))))))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(context) {\n        var _context$query, id, chapter, res, json;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // eslint-disable-next-line no-undef\n                _context$query = context.query, id = _context$query.id, chapter = _context$query.chapter;\n                _context.next = 3;\n                return fetch(\"\".concat(API_URL, \"chapter?novelid=\").concat(id, \"&chapterid=\").concat(chapter));\n\n              case 3:\n                res = _context.sent;\n                _context.next = 6;\n                return res.json();\n\n              case 6:\n                json = _context.sent;\n                return _context.abrupt(\"return\", {\n                  novelchapter: json\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Chapter;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  return {\n    novelReducer: state.novelReducer\n  };\n}\n\nexport default connect(mapStateToProps, {\n  saveNovel: saveNovel,\n  settingNovel: settingNovel\n})(Chapter);","map":{"version":3,"sources":["C:/Users/bakhjem/Desktop/nhattin/nextjstruyen/pages/doc/[id]/[chapter].js"],"names":["Layout","Link","React","Component","createRef","createMedia","connect","PropTypes","ReactHtmlParser","processNodes","convertNodeToElement","htmlparser2","Helmet","saveNovel","settingNovel","API_URL","Container","Breadcrumb","Divider","Dropdown","Grid","Header","Icon","Image","List","Menu","Segment","Visibility","Item","Sticky","Rail","Ref","Button","breakpoints","mobile","tablet","computer","MediaContextProvider","Media","menuStyle","border","borderRadius","boxShadow","marginBottom","transition","fixedMenuStyle","backgroundColor","Chapter","props","c","overlayRect","state","setState","_","pick","getBoundingClientRect","overlayFixed","menuFixed","prechap","nextchap","totalchapter","prevProps","prevState","novelchapter","fetch","idnovels","then","r","json","data","chapterlist","length","i","idchapter","console","log","chaptername","novelReducer","novelname","stickTopMenu","unStickTopMenu","undefined","background","marginTop","contextRef","fontFamily","font","lineHeight","lineheight","fontSize","fontsize","content","context","query","id","chapter","res","mapStateToProps"],"mappings":"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","sourcesContent":["import Layout from '../../../components/MyLayout'\r\nimport 'isomorphic-unfetch'\r\nimport Link from 'next/link'\r\nimport React, { Component, createRef } from 'react';\r\nimport { createMedia } from '@artsy/fresnel'\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport ReactHtmlParser, { processNodes, convertNodeToElement, htmlparser2 } from 'react-html-parser';\r\nimport { Helmet } from 'react-helmet';\r\nimport { saveNovel, settingNovel } from '../../../redux/actions/novelActions'\r\nimport { API_URL } from '../../../config/config'\r\nimport {\r\n    Container, Breadcrumb,\r\n    Divider,\r\n    Dropdown,\r\n    Grid,\r\n    Header,\r\n    Icon,\r\n    Image,\r\n    List,\r\n    Menu,\r\n    Segment,\r\n    Visibility,\r\n    Item,\r\n    Sticky, Rail,\r\n    Ref, Button\r\n} from 'semantic-ui-react';\r\nconst { MediaContextProvider, Media } = createMedia({\r\n    breakpoints: {\r\n        mobile: 0,\r\n        tablet: 768,\r\n        computer: 1024,\r\n    },\r\n})\r\nconst menuStyle = {\r\n    border: 'none',\r\n    borderRadius: 0,\r\n    boxShadow: 'none',\r\n    marginBottom: '1em',\r\n    transition: 'box-shadow 0.5s ease, padding 0.5s ease',\r\n}\r\n\r\nconst fixedMenuStyle = {\r\n    backgroundColor: '#fff',\r\n    border: '1px solid #ddd',\r\n    boxShadow: '0px 3px 5px rgba(0, 0, 0, 0.2)',\r\n}\r\nclass Chapter extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            prechap: '',\r\n            nextchap: '',\r\n            menuFixed: false,\r\n            overlayFixed: false,\r\n            totalchapter: 1\r\n        }\r\n    }\r\n    contextRef = createRef()\r\n    handleOverlayRef = (c) => {\r\n        const { overlayRect } = this.state\r\n\r\n        if (!overlayRect) {\r\n            this.setState({ overlayRect: _.pick(c.getBoundingClientRect(), 'height', 'width') })\r\n        }\r\n    }\r\n\r\n    stickOverlay = () => this.setState({ overlayFixed: true })\r\n\r\n    stickTopMenu = () => this.setState({ menuFixed: true })\r\n\r\n    unStickOverlay = () => this.setState({ overlayFixed: false })\r\n\r\n    unStickTopMenu = () => this.setState({ menuFixed: false })\r\n    static async getInitialProps(context) {\r\n        // eslint-disable-next-line no-undef\r\n        const { id, chapter } = context.query\r\n        const res = await fetch(`${API_URL}chapter?novelid=${id}&chapterid=${chapter}`)\r\n        // const res1 = await fetch(`http://localhost:8001/novel?id=${id}`)\r\n        const json = await res.json()\r\n        // const json1 = await res1.json();\r\n        // let prechap = '', nextchap = ''\r\n        // if (json1.chapterlist.length === 1) {\r\n        //     return { novelchapter: json, prechap: '', nextchap: '' }\r\n        // } else {\r\n        //     for (let i = 0; i < json1.chapterlist.length; i++) {\r\n        //         if (\r\n        //             json.idchapter ===\r\n        //             json1.chapterlist[i].idchapter\r\n        //         ) {\r\n        //             if (i === 0) {\r\n        //                 return { novelchapter: json, prechap: '', nextchap: json1.chapterlist[i + 1].idchapter }\r\n\r\n        //             }\r\n        //             if (i > 0 && i < json1.chapterlist.length - 1) {\r\n        //                 return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: json1.chapterlist[i + 1].idchapter }\r\n        //             }\r\n        //             if (i === json1.chapterlist.length - 1) {\r\n        //                 return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: '' }\r\n        //             }\r\n        //         }\r\n        //     }\r\n        // }\r\n        // console.log(json)\r\n        return { novelchapter: json }\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.novelchapter !== prevProps.novelchapter) {\r\n            fetch(`${API_URL}novel?id=${this.props.novelchapter.idnovels}`)\r\n                .then(r => r.json())\r\n                .then(data => {\r\n                    if (data.chapterlist.length === 1) {\r\n                        this.state({ prechap: '', nextchap: '', totalchapter: data.chapterlist.length })\r\n                    } else {\r\n                        for (let i = 0; i < data.chapterlist.length; i++) {\r\n                            if (\r\n                                this.props.novelchapter.idchapter ===\r\n                                data.chapterlist[i].idchapter\r\n                            ) {\r\n                                if (i === 0) {\r\n                                    this.setState({ prechap: '', nextchap: data.chapterlist[i + 1].idchapter, totalchapter: data.chapterlist.length })\r\n                                    // return { novelchapter: json, prechap: '', nextchap: json1.chapterlist[i + 1].idchapter }\r\n\r\n                                }\r\n                                if (i > 0 && i < data.chapterlist.length - 1) {\r\n                                    this.setState({ prechap: data.chapterlist[i - 1].idchapter, nextchap: data.chapterlist[i + 1].idchapter, totalchapter: data.chapterlist.length })\r\n                                    // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: json1.chapterlist[i + 1].idchapter }\r\n                                }\r\n                                if (i === data.chapterlist.length - 1) {\r\n                                    this.setState({ prechap: data.chapterlist[i - 1].idchapter, nextchap: '', totalchapter: data.chapterlist.length })\r\n                                    // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: '' }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch(`${API_URL}novel?id=${this.props.novelchapter.idnovels}`)\r\n            .then(r => r.json())\r\n            .then(data => {\r\n                this.props.saveNovel(data)\r\n                if (data.chapterlist.length === 1) {\r\n                    this.state({ prechap: '', nextchap: '' })\r\n                } else {\r\n                    for (let i = 0; i < data.chapterlist.length; i++) {\r\n                        if (\r\n                            this.props.novelchapter.idchapter ===\r\n                            data.chapterlist[i].idchapter\r\n                        ) {\r\n                            if (i === 0) {\r\n                                this.setState({ prechap: '', nextchap: data.chapterlist[i + 1].idchapter })\r\n                                // return { novelchapter: json, prechap: '', nextchap: json1.chapterlist[i + 1].idchapter }\r\n\r\n                            }\r\n                            if (i > 0 && i < data.chapterlist.length - 1) {\r\n                                this.setState({ prechap: data.chapterlist[i - 1].idchapter, nextchap: data.chapterlist[i + 1].idchapter })\r\n                                // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: json1.chapterlist[i + 1].idchapter }\r\n                            }\r\n                            if (i === data.chapterlist.length - 1) {\r\n                                this.setState({ prechap: data.chapterlist[i - 1].idchapter, nextchap: '' })\r\n                                // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: '' }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n    }\r\n\r\n    render() {\r\n        console.log(this.props)\r\n        console.log(this.state)\r\n        const { menuFixed, overlayFixed, overlayRect } = this.state;\r\n        return (\r\n            <Layout>\r\n                <style>\r\n                    {`\r\n          html, body {\r\n            background: #f5f7fa;\r\n          }\r\n        `}\r\n                </style>\r\n                <Helmet>\r\n                    <title>{`Read ${this.props.novelchapter.chaptername}`} - KitesNovel</title>\r\n                    <meta name=\"description\" content={`Read ${this.props.novelchapter.chaptername} for free, total ${this.state.totalchapter} chapter `} />\r\n                    <meta name=\"theme-color\" content=\"#008f68\" />\r\n                    <meta name=\"keywords\" content={`${this.props.novelchapter.chaptername}, ${this.props.novelchapter.chaptername} free, ${this.props.novelReducer.novelname} light novel, ${this.props.novelReducer.novelname} full chapters, ${this.props.novelReducer.novelname} latest chapters`} />\r\n                </Helmet>\r\n                <MediaContextProvider>\r\n                    <Media greaterThan='mobile'>\r\n                        <Visibility\r\n                            onBottomPassed={this.stickTopMenu}\r\n                            onBottomVisible={this.unStickTopMenu}\r\n                            once={false}\r\n                        >\r\n                            <Menu\r\n                                borderless\r\n                                fixed={menuFixed ? 'top' : undefined}\r\n                                style={menuFixed ? fixedMenuStyle : menuStyle}\r\n                            >\r\n                                <Container>\r\n                                    <Menu.Item>\r\n                                        <Link href='/'>\r\n                                            <Image size='tiny' src='/logo.png' />\r\n                                        </Link>\r\n\r\n                                    </Menu.Item>\r\n                                    <Menu.Item header>\r\n                                        <Breadcrumb size={'large'}>\r\n                                            <Breadcrumb.Section link><Link href='/'>Home</Link></Breadcrumb.Section>\r\n                                            <Breadcrumb.Divider icon='right chevron' />\r\n                                            <Breadcrumb.Section link>\r\n                                                <Link\r\n                                                    as={`/novel/${this.props.novelchapter.idnovels}`} href={`/novel/[id]`}\r\n                                                >{this.props.novelReducer.novelname}\r\n                                                </Link></Breadcrumb.Section>\r\n                                            <Breadcrumb.Divider icon='right chevron' />\r\n                                            <Breadcrumb.Section active>{this.props.novelchapter.chaptername}</Breadcrumb.Section>\r\n                                        </Breadcrumb>\r\n                                    </Menu.Item>\r\n                                </Container>\r\n                            </Menu>\r\n                        </Visibility>\r\n                    </Media>\r\n                    <Media at='mobile'>\r\n                        <Visibility\r\n                            onBottomPassed={this.stickTopMenu}\r\n                            onBottomVisible={this.unStickTopMenu}\r\n                            once={false}\r\n                        >\r\n                            <Menu\r\n                                borderless\r\n                                fixed={menuFixed ? 'top' : undefined}\r\n                                style={menuFixed ? fixedMenuStyle : menuStyle}\r\n                            >\r\n                                <Container>\r\n                                    <Menu.Item>\r\n                                        <Link href='/'>\r\n                                            <Image size='tiny' src='/logo.png' />\r\n                                        </Link>\r\n                                    </Menu.Item>\r\n                                    <Menu.Item header>\r\n                                        <Breadcrumb size={'large'}>\r\n                                            <Breadcrumb.Section link>\r\n                                                <Link\r\n                                                    as={`/novel/${this.props.novelchapter.idnovels}`} href={`/novel/[id]`}\r\n                                                >{this.props.novelReducer.novelname}\r\n                                                </Link></Breadcrumb.Section>\r\n                                        </Breadcrumb>\r\n                                    </Menu.Item>\r\n                                </Container>\r\n                            </Menu>\r\n                        </Visibility>\r\n                    </Media>\r\n                </MediaContextProvider>\r\n                <Container text style={{ backgroundColor: this.props.novelReducer.background }}>\r\n                    <Grid style={{ marginTop: 20 }}>\r\n                        <Grid.Column className='detail-containers' mobile={16} tablet={16} computer={16}>\r\n                            <Ref innerRef={this.contextRef}>\r\n                                <Segment>\r\n                                    <Item.Group textAlign='left'>\r\n                                        <Item.Description className='content' style={{\r\n                                            fontFamily: this.props.novelReducer.font, lineHeight: this.props.novelReducer.lineheight,\r\n                                            fontSize: this.props.novelReducer.fontsize\r\n                                        }} >\r\n                                            {this.props.novelchapter.content !== undefined ?\r\n                                                ReactHtmlParser(this.props.novelchapter.content)\r\n                                                : null\r\n                                            }\r\n                                        </Item.Description>\r\n                                    </Item.Group>\r\n                                    <MediaContextProvider>\r\n                                        <Media greaterThan='mobile'>\r\n                                            <Rail position='right' style={{ marginTop: 100 }}>\r\n                                                <Sticky offset={100} bottomOffset={100} context={this.contextRef}>\r\n                                                    <List>\r\n                                                        <List.Item>\r\n                                                            <Button size='large' circular icon='bars' />\r\n                                                        </List.Item>\r\n                                                        <List.Item>\r\n                                                            <Button size='large' circular icon='font' />\r\n                                                        </List.Item>\r\n                                                        <List.Item>\r\n                                                            <Button size='large' circular icon='moon' />\r\n                                                        </List.Item>\r\n                                                    </List>\r\n                                                </Sticky>\r\n                                            </Rail>\r\n                                        </Media>\r\n                                    </MediaContextProvider>\r\n                                </Segment>\r\n                            </Ref>\r\n                        </Grid.Column>\r\n                        <MediaContextProvider>\r\n                            <Media greaterThan='mobile'>\r\n                                <Grid.Row verticalAlign='middle'>\r\n                                    <Button.Group widths='3'>\r\n                                        <Link\r\n                                            as={`/doc/${this.props.novelchapter.idnovels}/${this.state.prechap}`}\r\n                                            href={`/doc/[id]/[chapter]`}\r\n                                        >\r\n                                            <Button size='huge' color='black' disabled={this.state.prechap !== \"\" ? false : true} labelPosition='left' icon='left chevron' content='Prev chapter' />\r\n                                        </Link>\r\n\r\n                                        <Button size='huge' color='black' icon='bars' content='Chapter List' />\r\n                                        <Link\r\n                                            as={`/doc/${this.props.novelchapter.idnovels}/${this.state.nextchap}`}\r\n                                            href={`/doc/[id]/[chapter]`}\r\n                                        >\r\n                                            <Button size='huge' color='black' disabled={this.state.nextchap !== \"\" ? false : true} labelPosition='right' icon='right chevron' content='Next chapter' />\r\n                                        </Link>\r\n                                    </Button.Group>\r\n                                </Grid.Row>\r\n                            </Media>\r\n                            <Media at='mobile'>\r\n                                <Grid.Row mobile={16} tablet={16} computer={16} verticalAlign='middle'>\r\n                                    <Button.Group widths='3'>\r\n                                        <Link\r\n                                            as={`/doc/${this.props.novelchapter.idnovels}/${this.state.prechap}`}\r\n                                            href={`/doc/[id]/[chapter]`}\r\n                                        >\r\n                                            <Button size='huge' color='black' disabled={this.state.prechap !== \"\" ? false : true} labelPosition='left' icon='left chevron' />\r\n                                        </Link>\r\n\r\n                                        <Button size='huge' color='black' icon='bars' />\r\n                                        <Link\r\n                                            as={`/doc/${this.props.novelchapter.idnovels}/${this.state.nextchap}`}\r\n                                            href={`/doc/[id]/[chapter]`}\r\n                                        >\r\n                                            <Button size='huge' color='black' disabled={this.state.nextchap !== \"\" ? false : true} labelPosition='right' icon='right chevron' />\r\n                                        </Link>\r\n                                    </Button.Group>\r\n                                </Grid.Row>\r\n                            </Media>\r\n                        </MediaContextProvider>\r\n                    </Grid>\r\n                </Container>\r\n\r\n            </Layout>\r\n        )\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        novelReducer: state.novelReducer\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, { saveNovel, settingNovel })(Chapter);"]},"metadata":{},"sourceType":"module"}