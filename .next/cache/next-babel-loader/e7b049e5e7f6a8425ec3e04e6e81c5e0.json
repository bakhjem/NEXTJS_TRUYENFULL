{"ast":null,"code":"var __jsx = React.createElement;\nimport Layout from '../../../components/MyLayout';\nimport 'isomorphic-unfetch';\nimport Link from 'next/link';\nimport React from 'react';\nimport ReactHtmlParser, { processNodes, convertNodeToElement, htmlparser2 } from 'react-html-parser';\nimport { Helmet } from 'react-helmet';\nexport default class Chapter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      prechap: '',\n      nextchap: ''\n    };\n  }\n\n  static async getInitialProps(context) {\n    // eslint-disable-next-line no-undef\n    const {\n      id,\n      chapter\n    } = context.query;\n    const res = await fetch(`http://localhost:8001/chapter?novelid=${id}&chapterid=${chapter}`); // const res1 = await fetch(`http://localhost:8001/novel?id=${id}`)\n\n    const json = await res.json(); // const json1 = await res1.json();\n    // let prechap = '', nextchap = ''\n    // if (json1.chapterlist.length === 1) {\n    //     return { novelchapter: json, prechap: '', nextchap: '' }\n    // } else {\n    //     for (let i = 0; i < json1.chapterlist.length; i++) {\n    //         if (\n    //             json.idchapter ===\n    //             json1.chapterlist[i].idchapter\n    //         ) {\n    //             if (i === 0) {\n    //                 return { novelchapter: json, prechap: '', nextchap: json1.chapterlist[i + 1].idchapter }\n    //             }\n    //             if (i > 0 && i < json1.chapterlist.length - 1) {\n    //                 return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: json1.chapterlist[i + 1].idchapter }\n    //             }\n    //             if (i === json1.chapterlist.length - 1) {\n    //                 return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: '' }\n    //             }\n    //         }\n    //     }\n    // }\n    // console.log(json)\n\n    return {\n      novelchapter: json\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.novelchapter !== prevProps.novelchapter) {\n      fetch(`http://localhost:8001/novel?id=${this.props.novelchapter.idnovels}`).then(r => r.json()).then(data => {\n        if (data.chapterlist.length === 1) {\n          this.state({\n            prechap: '',\n            nextchap: ''\n          });\n        } else {\n          for (let i = 0; i < data.chapterlist.length; i++) {\n            if (this.props.novelchapter.idchapter === data.chapterlist[i].idchapter) {\n              if (i === 0) {\n                this.setState({\n                  prechap: '',\n                  nextchap: data.chapterlist[i + 1].idchapter\n                }); // return { novelchapter: json, prechap: '', nextchap: json1.chapterlist[i + 1].idchapter }\n              }\n\n              if (i > 0 && i < data.chapterlist.length - 1) {\n                this.setState({\n                  prechap: data.chapterlist[i - 1].idchapter,\n                  nextchap: data.chapterlist[i + 1].idchapter\n                }); // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: json1.chapterlist[i + 1].idchapter }\n              }\n\n              if (i === data.chapterlist.length - 1) {\n                this.setState({\n                  prechap: data.chapterlist[i - 1].idchapter,\n                  nextchap: ''\n                }); // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: '' }\n              }\n            }\n          }\n        }\n      });\n    }\n  }\n\n  componentDidMount() {\n    fetch(`http://localhost:8001/novel?id=${this.props.novelchapter.idnovels}`).then(r => r.json()).then(data => {\n      if (data.chapterlist.length === 1) {\n        this.state({\n          prechap: '',\n          nextchap: ''\n        });\n      } else {\n        for (let i = 0; i < data.chapterlist.length; i++) {\n          if (this.props.novelchapter.idchapter === data.chapterlist[i].idchapter) {\n            if (i === 0) {\n              this.setState({\n                prechap: '',\n                nextchap: data.chapterlist[i + 1].idchapter\n              }); // return { novelchapter: json, prechap: '', nextchap: json1.chapterlist[i + 1].idchapter }\n            }\n\n            if (i > 0 && i < data.chapterlist.length - 1) {\n              this.setState({\n                prechap: data.chapterlist[i - 1].idchapter,\n                nextchap: data.chapterlist[i + 1].idchapter\n              }); // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: json1.chapterlist[i + 1].idchapter }\n            }\n\n            if (i === data.chapterlist.length - 1) {\n              this.setState({\n                prechap: data.chapterlist[i - 1].idchapter,\n                nextchap: ''\n              }); // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: '' }\n            }\n          }\n        }\n      }\n    });\n  }\n\n  render() {\n    console.log(this.props);\n    console.log(this.state);\n    return __jsx(Layout, null, __jsx(Helmet, null, __jsx(\"title\", null, `Đọc ${this.props.novelchapter.chaptername}`, \" - YYtruyen\"), __jsx(\"meta\", {\n      name: \"description\",\n      content: `Đọc truyện ${this.props.novelchapter.chaptername} online free tại yytruyen.com, cập nhật các chương mới nhất của truyện này tại đây nhé`\n    }), __jsx(\"meta\", {\n      name: \"theme-color\",\n      content: \"#008f68\"\n    }), __jsx(\"meta\", {\n      name: \"keywords\",\n      content: \"\\u0111\\u1ECDc truy\\u1EC7n online, truy\\u1EC7n online, truy\\u1EC7n ng\\xF4n t\\xECnh, truy\\u1EC7n ki\\u1EBFm hi\\u1EC7p, truy\\u1EC7n ng\\u01B0\\u1EE3c, s\\u1EE7ng\"\n    })), __jsx(\"div\", {\n      className: \"breadcrumb breadcrumbs breadcrumbs_doc\"\n    }, __jsx(\"div\", {\n      className: \"rdfa-breadcrumb\"\n    }, __jsx(\"div\", null, __jsx(\"p\", null, __jsx(\"span\", {\n      className: \"breadcrumbs-title\"\n    }), __jsx(\"span\", null, __jsx(Link, {\n      href: \"/\"\n    }, __jsx(\"a\", {\n      className: \"home\",\n      title: \"\\u0110\\u1ECDc truy\\u1EC7n online\"\n    }, \"\\u0110\\u1ECDc truy\\u1EC7n online\"))), __jsx(\"span\", {\n      className: \"separator\"\n    }, \"\\xBB\"), __jsx(\"span\", null, __jsx(Link, {\n      as: `/truyen/${this.props.novelchapter.idnovels}`,\n      href: `/truyen/[id]`\n    }, __jsx(\"a\", {\n      className: \"home\"\n    }, this.props.novelchapter.novelsname))), __jsx(\"span\", {\n      className: \"separator\"\n    }, \"\\xBB\"), \" \", this.props.novelchapter.chaptername)))), __jsx(\"div\", {\n      className: \"menu_doc\",\n      style: {\n        flexDirection: 'row',\n        padding: 10\n      }\n    }, __jsx(Link, {\n      as: `/truyen/${this.props.novelchapter.idnovels}`,\n      href: `/truyen?id=${this.props.novelchapter.idnovels}`\n    }, __jsx(\"a\", {\n      style: {\n        color: 'white'\n      }\n    }, __jsx(\"button\", {\n      color: \"primary\",\n      style: {\n        margin: 5\n      }\n    }, \"Danh s\\xE1ch ch\\u01B0\\u01A1ng\"))), this.state.prechap !== \"\" && __jsx(Link // className=\"btn_theodoi btn_doc\"\n    , {\n      as: `/doc/${this.props.novelchapter.idnovels}/${this.state.prechap}`,\n      href: `/doc/[id]/[chapter]`\n    }, __jsx(\"a\", {\n      rel: \"nofollow\",\n      style: {\n        color: 'white'\n      }\n    }, __jsx(\"button\", {\n      style: {\n        margin: 5\n      }\n    }, \"Ch\\u01B0\\u01A1ng tr\\u01B0\\u1EDBc\"))), this.state.nextchap !== \"\" && __jsx(Link // className=\"btn_theodoi btn_doc\"\n    , {\n      as: `/doc/${this.props.novelchapter.idnovels}/${this.state.nextchap}`,\n      href: `/doc/[id]/[chapter]`\n    }, __jsx(\"a\", {\n      rel: \"nofollow\",\n      style: {\n        color: 'white'\n      }\n    }, __jsx(\"button\", {\n      color: \"primary\",\n      style: {\n        margin: 5\n      }\n    }, \"Ch\\u01B0\\u01A1ng sau\")))), __jsx(\"div\", {\n      className: \"hentry\"\n    }, __jsx(\"h1\", {\n      className: \"name_chapter entry-title\"\n    }, this.props.novelchapter.chaptername), __jsx(\"div\", {\n      className: \"entry-content\"\n    }, __jsx(\"div\", {\n      id: \"vung_doc\",\n      className: \"vung_doc\"\n    }, this.props.novelchapter.content !== undefined ? ReactHtmlParser(this.props.novelchapter.content) : null)), __jsx(\"div\", {\n      className: \"menu_doc\",\n      style: {\n        flexDirection: 'row',\n        padding: 10\n      }\n    }, __jsx(Link, {\n      as: `/truyen/${this.props.novelchapter.idnovels}`,\n      href: `/truyen/[id]`\n    }, __jsx(\"a\", {\n      style: {\n        color: 'white'\n      }\n    }, __jsx(\"button\", {\n      color: \"primary\",\n      style: {\n        margin: 5\n      }\n    }, \"Danh s\\xE1ch ch\\u01B0\\u01A1ng\"))), this.state.prechap !== \"\" && __jsx(Link // className=\"btn_theodoi btn_doc\"\n    , {\n      as: `/doc/${this.props.novelchapter.idnovels}/${this.state.prechap}`,\n      href: `/doc/[id]/[chapter]`\n    }, __jsx(\"a\", {\n      rel: \"nofollow\",\n      style: {\n        color: 'white'\n      }\n    }, __jsx(\"button\", {\n      color: \"primary\",\n      style: {\n        margin: 5\n      }\n    }, \"Ch\\u01B0\\u01A1ng tr\\u01B0\\u1EDBc\"))), this.state.nextchap !== \"\" && __jsx(Link // className=\"btn_theodoi btn_doc\"\n    , {\n      as: `/doc/${this.props.novelchapter.idnovels}/${this.state.nextchap}`,\n      href: `/doc/[id]/[chapter]`\n    }, __jsx(\"a\", {\n      rel: \"nofollow\",\n      style: {\n        color: 'white'\n      }\n    }, __jsx(\"button\", {\n      color: \"primary\",\n      style: {\n        margin: 5\n      }\n    }, \"Ch\\u01B0\\u01A1ng sau\"))))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/bakhjem/Desktop/nhattin/nextjstruyen/pages/doc/[id]/[chapter].js"],"names":["Layout","Link","React","ReactHtmlParser","processNodes","convertNodeToElement","htmlparser2","Helmet","Chapter","Component","constructor","props","state","prechap","nextchap","getInitialProps","context","id","chapter","query","res","fetch","json","novelchapter","componentDidUpdate","prevProps","prevState","idnovels","then","r","data","chapterlist","length","i","idchapter","setState","componentDidMount","render","console","log","chaptername","novelsname","flexDirection","padding","color","margin","content","undefined"],"mappings":"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","sourcesContent":["import Layout from '../../../components/MyLayout'\r\nimport 'isomorphic-unfetch'\r\nimport Link from 'next/link'\r\nimport React from 'react'\r\nimport ReactHtmlParser, { processNodes, convertNodeToElement, htmlparser2 } from 'react-html-parser';\r\nimport { Helmet } from 'react-helmet';\r\n\r\nexport default class Chapter extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state ={\r\n            prechap:'',\r\n            nextchap:''\r\n        }\r\n    }\r\n    \r\n    static async getInitialProps(context) {\r\n        // eslint-disable-next-line no-undef\r\n        const { id, chapter } = context.query\r\n        const res = await fetch(`http://localhost:8001/chapter?novelid=${id}&chapterid=${chapter}`)\r\n        // const res1 = await fetch(`http://localhost:8001/novel?id=${id}`)\r\n        const json = await res.json()\r\n        // const json1 = await res1.json();\r\n        // let prechap = '', nextchap = ''\r\n        // if (json1.chapterlist.length === 1) {\r\n        //     return { novelchapter: json, prechap: '', nextchap: '' }\r\n        // } else {\r\n        //     for (let i = 0; i < json1.chapterlist.length; i++) {\r\n        //         if (\r\n        //             json.idchapter ===\r\n        //             json1.chapterlist[i].idchapter\r\n        //         ) {\r\n        //             if (i === 0) {\r\n        //                 return { novelchapter: json, prechap: '', nextchap: json1.chapterlist[i + 1].idchapter }\r\n\r\n        //             }\r\n        //             if (i > 0 && i < json1.chapterlist.length - 1) {\r\n        //                 return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: json1.chapterlist[i + 1].idchapter }\r\n        //             }\r\n        //             if (i === json1.chapterlist.length - 1) {\r\n        //                 return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: '' }\r\n        //             }\r\n        //         }\r\n        //     }\r\n        // }\r\n        // console.log(json)\r\n        return { novelchapter: json }\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if(this.props.novelchapter !== prevProps.novelchapter){\r\n            fetch(`http://localhost:8001/novel?id=${this.props.novelchapter.idnovels}`)\r\n            .then(r => r.json())\r\n            .then(data => {\r\n                if (data.chapterlist.length === 1) {\r\n                    this.state({prechap:'',nextchap:''})\r\n                } else {\r\n                    for (let i = 0; i < data.chapterlist.length; i++) {\r\n                        if (\r\n                            this.props.novelchapter.idchapter ===\r\n                            data.chapterlist[i].idchapter\r\n                        ) {\r\n                            if (i === 0) {\r\n                                this.setState({prechap:'',nextchap: data.chapterlist[i + 1].idchapter})\r\n                                // return { novelchapter: json, prechap: '', nextchap: json1.chapterlist[i + 1].idchapter }\r\n        \r\n                            }\r\n                            if (i > 0 && i < data.chapterlist.length - 1) {\r\n                                this.setState({prechap:data.chapterlist[i - 1].idchapter,nextchap: data.chapterlist[i + 1].idchapter})\r\n                                // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: json1.chapterlist[i + 1].idchapter }\r\n                            }\r\n                            if (i === data.chapterlist.length - 1) {\r\n                                this.setState({prechap:data.chapterlist[i - 1].idchapter,nextchap:''})\r\n                                // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: '' }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    \r\n    componentDidMount() {\r\n        fetch(`http://localhost:8001/novel?id=${this.props.novelchapter.idnovels}`)\r\n            .then(r => r.json())\r\n            .then(data => {\r\n                if (data.chapterlist.length === 1) {\r\n                    this.state({prechap:'',nextchap:''})\r\n                } else {\r\n                    for (let i = 0; i < data.chapterlist.length; i++) {\r\n                        if (\r\n                            this.props.novelchapter.idchapter ===\r\n                            data.chapterlist[i].idchapter\r\n                        ) {\r\n                            if (i === 0) {\r\n                                this.setState({prechap:'',nextchap: data.chapterlist[i + 1].idchapter})\r\n                                // return { novelchapter: json, prechap: '', nextchap: json1.chapterlist[i + 1].idchapter }\r\n        \r\n                            }\r\n                            if (i > 0 && i < data.chapterlist.length - 1) {\r\n                                this.setState({prechap:data.chapterlist[i - 1].idchapter,nextchap: data.chapterlist[i + 1].idchapter})\r\n                                // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: json1.chapterlist[i + 1].idchapter }\r\n                            }\r\n                            if (i === data.chapterlist.length - 1) {\r\n                                this.setState({prechap:data.chapterlist[i - 1].idchapter,nextchap:''})\r\n                                // return { novelchapter: json, prechap: json1.chapterlist[i - 1].idchapter, nextchap: '' }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n    }\r\n    \r\n\r\n    render() {\r\n        console.log(this.props)\r\n        console.log(this.state)\r\n        return (\r\n            <Layout>\r\n                <Helmet>\r\n                    <title>{`Đọc ${this.props.novelchapter.chaptername}`} - YYtruyen</title>\r\n                    <meta name=\"description\" content={`Đọc truyện ${this.props.novelchapter.chaptername} online free tại yytruyen.com, cập nhật các chương mới nhất của truyện này tại đây nhé`} />\r\n                    <meta name=\"theme-color\" content=\"#008f68\" />\r\n                    <meta name=\"keywords\" content=\"đọc truyện online, truyện online, truyện ngôn tình, truyện kiếm hiệp, truyện ngược, sủng\" />\r\n                </Helmet>\r\n                <div className=\"breadcrumb breadcrumbs breadcrumbs_doc\">\r\n                    <div className=\"rdfa-breadcrumb\">\r\n                        <div>\r\n                            <p>\r\n                                <span className=\"breadcrumbs-title\" />\r\n                                <span>\r\n                                    <Link href=\"/\"  >\r\n                                        <a className=\"home\" title=\"Đọc truyện online\">\r\n                                            Đọc truyện online\r\n                    </a>\r\n                                    </Link>\r\n                                </span>\r\n                                <span className=\"separator\">»</span>\r\n                                <span>\r\n                                    <Link\r\n                                        as={`/truyen/${this.props.novelchapter.idnovels}`}\r\n                                        href={`/truyen/[id]`}\r\n                                    >\r\n                                        <a className=\"home\">\r\n                                            {this.props.novelchapter.novelsname}\r\n                                        </a>\r\n                                    </Link>\r\n                                </span>\r\n                                <span className=\"separator\">»</span>{\" \"}\r\n                                {this.props.novelchapter.chaptername}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"menu_doc\" style={{ flexDirection: 'row', padding: 10 }}>\r\n                    <Link\r\n                        as={`/truyen/${this.props.novelchapter.idnovels}`}\r\n                        href={`/truyen?id=${this.props.novelchapter.idnovels}`}>\r\n                        <a style={{ color: 'white' }}>\r\n                            <button color=\"primary\" style={{ margin: 5 }}>\r\n                                Danh sách chương\r\n            </button>\r\n                        </a>\r\n                    </Link>\r\n                    {this.state.prechap !== \"\" && (\r\n                        <Link\r\n\r\n                            // className=\"btn_theodoi btn_doc\"\r\n                            as={`/doc/${this.props.novelchapter.idnovels}/${this.state.prechap}`}\r\n                            href={`/doc/[id]/[chapter]`}\r\n                        >\r\n                            <a rel=\"nofollow\"\r\n                                style={{ color: 'white' }}>\r\n                                <button style={{ margin: 5 }}>\r\n                                    Chương trước\r\n              </button>\r\n                            </a>\r\n                        </Link>\r\n                    )}\r\n                    {this.state.nextchap !== \"\" && (\r\n\r\n                        <Link\r\n\r\n                            // className=\"btn_theodoi btn_doc\"\r\n                            as={`/doc/${this.props.novelchapter.idnovels}/${this.state.nextchap}`}\r\n                            href={`/doc/[id]/[chapter]`}\r\n                        >\r\n                            <a rel=\"nofollow\"\r\n                                style={{ color: 'white' }}>\r\n                                <button color=\"primary\" style={{ margin: 5 }}>\r\n                                    Chương sau\r\n              </button>\r\n                            </a>\r\n                        </Link>\r\n                    )}\r\n                </div>\r\n                <div className=\"hentry\">\r\n                    <h1 className=\"name_chapter entry-title\">{this.props.novelchapter.chaptername}</h1>\r\n                    <div className=\"entry-content\">\r\n                        <div id=\"vung_doc\" className=\"vung_doc\">\r\n                            {this.props.novelchapter.content !== undefined ?\r\n                                ReactHtmlParser(this.props.novelchapter.content)\r\n                                : null\r\n                            }\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div className=\"menu_doc\" style={{ flexDirection: 'row', padding: 10 }}>\r\n                        <Link\r\n                            as={`/truyen/${this.props.novelchapter.idnovels}`}\r\n                            href={`/truyen/[id]`}>\r\n                            <a style={{ color: 'white' }} >\r\n                                <button color=\"primary\" style={{ margin: 5 }}>\r\n                                    Danh sách chương\r\n            </button>\r\n                            </a>\r\n                        </Link>\r\n                        {this.state.prechap !== \"\" && (\r\n                            <Link\r\n\r\n                                // className=\"btn_theodoi btn_doc\"\r\n                                as={`/doc/${this.props.novelchapter.idnovels}/${this.state.prechap}`}\r\n                                href={`/doc/[id]/[chapter]`}\r\n                            >\r\n                                <a rel=\"nofollow\"\r\n                                    style={{ color: 'white' }}>\r\n                                    <button color=\"primary\" style={{ margin: 5 }}>\r\n                                        Chương trước\r\n              </button>\r\n                                </a>\r\n                            </Link>\r\n                        )}\r\n                        {this.state.nextchap !== \"\" && (\r\n\r\n                            <Link\r\n\r\n                                // className=\"btn_theodoi btn_doc\"\r\n                                as={`/doc/${this.props.novelchapter.idnovels}/${this.state.nextchap}`}\r\n                                href={`/doc/[id]/[chapter]`}\r\n                            >\r\n                                <a rel=\"nofollow\"\r\n                                    style={{ color: 'white' }}>\r\n                                    <button color=\"primary\" style={{ margin: 5 }}>\r\n                                        Chương sau\r\n              </button>\r\n                                </a>\r\n                            </Link>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </Layout>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}